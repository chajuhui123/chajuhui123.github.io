{"componentChunkName":"component---src-templates-blog-post-js","path":"/infra/2023-03-26-ec2/","result":{"data":{"site":{"siteMetadata":{"title":""}},"markdownRemark":{"id":"8a8bd56b-613e-55b2-908d-6e5ffe9a8ad5","excerpt":"OpenLDAP 을 활용하여, LDAP 서비스를 구축하는 토이프로젝트를 진행하고 있는데요! 그러기 위해선 EC2 인스턴스가 필요하여, SSH 키 등록 부터 EC2 접속까지 정리해보려고 합니다. 1. AWS SSH 키 등록 (키페어) 기존에 사용하던 키페어가 존재한다면 가능 + (SSH…","html":"<p>OpenLDAP 을 활용하여, LDAP 서비스를 구축하는 토이프로젝트를 진행하고 있는데요!</p>\n<p>그러기 위해선 EC2 인스턴스가 필요하여, SSH 키 등록 부터 EC2 접속까지 정리해보려고 합니다.</p>\n<hr>\n<h3>1. AWS SSH 키 등록 (키페어)</h3>\n<ul>\n<li>기존에 사용하던 키페어가 존재한다면 가능</li>\n</ul>\n<h3>+ (SSH 개인키 권한)</h3>\n<ul>\n<li>소유자에 대한 읽기/ 쓰기 권한 외 제거가 필요하다.</li>\n<li>SSH 서버 접속 시 사용할 PEM 개인키는 최소 권한이 설정되어 있어야 사용 가능하다.</li>\n<li>SSH 키는 비대칭 키다.</li>\n<li>개인키와 공개키로 이루어져있는데, SSH 접속을 하려는 주체와 접속하고자 하는 대상 (EC2 머신)에 각각 설치된다.</li>\n<li>EC2 머신을 생성하는 단계에서 SSH 공개키를 등록할 수 있다.</li>\n</ul>\n<h3>2. EC2 머신 생성</h3>\n<ul>\n<li>인스턴스 시작</li>\n<li><code class=\"language-text\">Ubuntu Server 20.04 LTS (HVM), SSD Volume Type</code> 을 생성하고, 유형은 <code class=\"language-text\">t2.micro</code> 로 셋팅 (테스트용인 경우 프리티어 사용 가능인지 확인)</li>\n</ul>\n<h3>3. 그 외의 세부 셋팅</h3>\n<ul>\n<li>기본적으로 디폴트 값으로 진행</li>\n<li>키페어는 생성한 키페어로 등록해줌</li>\n<li>보안 그룹의 경우 해당 서버에 접근 가능한 IP 제한을 진행할 수 있는데, SSH 접속을 위해 22번 포트에 모든 IP를 허용할 수 있도록 <code class=\"language-text\">0.0.0.0/0</code>로 셋팅</li>\n</ul>\n<h3>4. SSH 원격 서버 접속</h3>\n<ul>\n<li>인스턴스 세부정보에서 <code class=\"language-text\">퍼블릭 IPv4 주소</code>를 복사</li>\n<li>개인키를 이용해 SSH 접근 시에는 <code class=\"language-text\">-i</code> 명령어를 사용</li>\n<li>권한을 <strong>최소권한으로 설정해야</strong> 접속할 수 있음 (보안적으로 중요한 키이기 때문에)</li>\n<li>명령어 : <code class=\"language-text\">ssh -i {pemkey}.pem ubuntu@{public_IPv4_address}</code></li>\n</ul>\n<h3>관련 이슈</h3>\n<ol>\n<li>Pem Key 권한 이슈</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\nPermissions xxxx for './{pemKey}' are too open.</code></pre></div>\n<p>key의 <strong>권한 관련 이슈</strong>입니다.</p>\n<p>pemKey는 보안적으로 중요한 키이기 때문에 최소한의 권한으로 설정해야 접속할 수 있습니다.</p>\n<p>소유자 외의 사용자가 접근이 불가능하며 수정이 가능해서는 안 됩니다.</p>\n<p>해결 방법은 키의 권한(Permission)을 <code class=\"language-text\">chmod</code> 명령어를 통해 <code class=\"language-text\">400</code>으로 변경해 주시면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">chmod 400 ./{pemKey}</code></pre></div>\n<p>chmod 뒤 숫자는 <code class=\"language-text\">본인/그룹/전체</code>에 대한 권한을 의미합니다.</p>\n<p>권한은 세가지로 <code class=\"language-text\">read(4)</code>, <code class=\"language-text\">write(2)</code>, <code class=\"language-text\">execute(1)</code> 가 있는데 이 숫자들 합의 조합으로 권한을 나타낼 수 있습니다.</p>\n<ul>\n<li><code class=\"language-text\">400</code>: 본인은 읽기(4) 권한</li>\n<li><code class=\"language-text\">600</code>: 본인은 읽기(4), 쓰기(2) 권한</li>\n<li><code class=\"language-text\">744</code>: 본인은 읽기(4), 쓰기(2), 실행(1) 권한 / 그룹은 읽기(4) 권한/ 전체는 읽기(4) 권한</li>\n</ul>","frontmatter":{"title":"AWS SSH 키 등록 및 EC2 접속 방법","category":"infra","date":"March 26, 2023","description":null}},"previous":{"fields":{"slug":"/infra/2023-03-23-LDAP/"},"frontmatter":{"title":"중앙관리 및 검색에 최적화된 디렉터리 서비스 'LDAP'"}},"next":{"fields":{"slug":"/infra/2023-04-02-keycloak/"},"frontmatter":{"title":"인증, 인가를 관리하고 SSO 로그인을 제공하는 오픈소스 'Keycloak'"}}},"pageContext":{"id":"8a8bd56b-613e-55b2-908d-6e5ffe9a8ad5","previousPostId":"3b0d703e-bbcc-5124-b025-fdbd1d960f7b","nextPostId":"a0552f85-c5c9-5a31-8ab9-7ac6d0610d92"}},"staticQueryHashes":["2841359383","3274528899"]}