---
title: "인프라 관련 지식 정리"
date: 2023-05-06
category: "infra"
draft: false
---

사내 인프라 파트에서 인턴 경험을 쌓으면서 팀원들의 인프라 관련 업무를 엿볼 수 있었는데요.

**사내 구성원을 위한 기술적 지원을 하고, 더 나은 업무 환경을 위해 고민**하는 업무라는 것을 알 수 있게 되었습니다.

그 동안 개발 경험을 위주로 쌓아왔던 저에게 인프라 관련 도메인 지식과 업무는 낯설기도 하였는데, 이번 포스팅에서 인프라에 대한 지식도 쌓으며 저만의 언어로 정리해보려고 합니다!

---

# 1. IT Infrastructure

> IT 인프라란?

Infrastructure 라는 단어에서 예측 가능한데요. 애플리케이션을 가동시키기 위해 필요한 `하드웨어`나 `OS`, `미들웨어`, `네트워크` 등 시스템의 기반을 의미합니다. 저는 애플리케이션 세상에 출시하기 위해 필요한 기반이라고 이해를 하겠습니다!

시스템의 요구 사항에는 **기능적 요구사항**, **비기능적 요구사항**이 존재합니다.

- 기능적 요구사항 (functional requirement): 해당 시스템이 어떤 기능을 하는지, 무엇을 할 수 있는지
- 비기능적 요구사항 (non-functional requirement): 시스템의 성능, 안정성, 확장성, 보안 등

인프라는 비기능적인 요구사항과 관련이 있습니다.

> 클라우드의 등장

애플리케이션 개발과 환경 구축 패러다임에 변화가 일어났는데요.

데이터센터나 서버실에 서버를 두고 직접 관리하던 `온프레미스(On-premise) 방식`에서 가상의 서버를 여러 대 띄우는 `클라우드 방식`으로 옮겨지게 되었습니다.

이러한 분산 환경에서는 수동적 관리 방법 보다는, 자동화된 툴을 사용하여 `오케스트레이션(orchestration)`합니다.

따라서 자동화를 위해 코드를 작성하는 능력이 요구되며, 배포나 테스트 등이 개발자의 업무로 넘어오게 되며, 인프라 관련 지식이 필요하게 되었습니다!

> 인프라의 구성 요소

- `하드웨어(Hardware, HW)` : 서버 장비 본체나 데이터를 저장하기 위한 스토리지, 전원 장치 등. 넓은 의미로는 이런 하드웨어를 설치하는 데이터 센터의 설비(건물, 공조, 보안 설비, 소화 설비 등) 또한 포함
- `네트워크(Network)` : 사용자가 원격으로 접근할 수 있도록 서버를 연결하는 도구
  - **라우터**, **스위치**, **방화벽** 등 네트워크 장비와 이를 연결하는 **케이블 배선** 등이 있습니다.
  - 사용자가 단말에서 무선으로 연결할 때 필요한 **액세스 포인트(Access Point, AP)**
- `운영체제(Operating System, OS)` : 하드웨어와 네트워크 장비를 제어하기 위한 기본적인 소프트웨어 (리소스나 프로세스 관리)
  - `클라이언트 OS` : 사용자가 사용하기 쉽도록 하는데 초점 (Windows, macOS ...)
  - `서버 OS` : 시스템을 빠르고 안정적으로 실행하는데 초점 (Linux, Unix, Windows Server ...)
- `미들웨어(middleware)` : 서버 상에서 서버가 특정 역할을 하도록 기능을 제공하는 소프트웨어

---

# 2. 온프레미스와 클라우드

> 온프레미스 On-Premises

`온프레미스`는 **데이터 센터나 서버실에 서버를 두고 직접 관리하는 전통적인 방식**입니다. 집에 개인적으로 NAS나 서브 PC로 작은 서버를 돌리는 행위도 포함합니다. (NAS는 네트워크 결합 스토리지로 LAN으로 연결하는 외장 하드디스크입니다)

- 단점 : `서버`, `네트워크 장비`, `OS`, `스토리지`, `각종 솔루션` 등을 직접 구매, 설치, 관리해야 합니다. 초기 투자 비용이 크고, 사용 예측량 가늠이 어려우며, 사용량이 적어도 유지 비용이 그대로 나간다는 특징이 있습니다.

- 온프레미스 환경이 유리한 경우 : **1. 클라우드 이상의 가용성** **2. 기밀성**

  - `온프레미스`, `클라우드` 모두 가용성을 보장하지만, 개념에서 차이가 있습니다. 온프레미스는 **서버가 죽지 않는 것을 목표**로 하나, 클라우드는 많은 인스턴스로 이루어진 분산 환경에서 인스턴스가 죽으면 다른 인스턴스가 **빠르게 대체하는 것**을 의미합니다. 클라우드 환경에서 가용성을 높이기 위해선, 가용성을 높이도록 설계를 해야합니다. 따라서 **잠시라도 끊어져서는 안되는 시스템이나 클라우드 업체가 보장하는 것 이상의 가용성이 필요한 시스템**에서는 온프레미스가 유리합니다.

  - 또한 기밀성이 높은 데이터의 경우에도 온프레미스가 유리합니다. **물리적인 저장 장소를 명확히 알 필요가 있을 때**는 온프레미스가 유리합니다. 특히, 멀티 클라우드를 사용한다면 각 클라우드 프로바이더마다 보안 정책이 다르기 때문에 보안 표준을 구축하기 어려운 점도 있습니다.

> 퍼블릭 클라우드 Public Cloud

**인터넷을 통해 불특정 다수에게 서비스 형태로 제공되는 시스템**입니다.

서비스 형태라는 건 사용자는 원하는 옵션을 선택하고, 사용한만큼 비용을 지불하면 된다는 걸 말합니다. 제공하는 서비스에 따라 `IaaS`, `PaaS`, `SaaS` 등으로 나눌 수 있습니다. 이 중 `IaaS`는 원하는 사양의 가상 머신이나 스토리지를 선택하고 이용한 시간이나 데이터 양에 따라 비용을 지불합니다.

AWS(Amazon Web Service), Microsoft Azure, GCP(Google Cloud Platform) 등 클라우드 프로바이더가 데이터 센터와 인프라를 보유하고 있습니다.

> 프라이빗 클라우드 Private Cloud

퍼블릭 클라우드에서 **이용자를 한정한 형태**입니다. 기업 내 서비스가 대표적이며, 보안성이 높고 기능이나 서비스를 추가하기 쉽습니다.

- 클라우드 환경이 유리한 경우 : **1. 트래픽 변동이 잦은 서비스** **2. 초기 투자금이 적은 스타트업 혹은 개인**

  - 트래픽 양에 따라 서버 사양이나 네트워크 대역을 추정하는 것을 `사이징(sizing)`이라고 합니다. 사내 시스템의 경우 사용자가 한정되어 있고 트래픽을 예측하기가 쉬워 `온프레미스` 환경도 적합합니다. 하지만, 대외 서비스에서는 사이징 작업이 쉽지 않습니다. (크게 잡으면 낭비, 적게 잡으면 단기간에 증설하기 어려움)
  - 대외 서비스처럼, 트래픽의 변동이 많은 시스템은 `클라우드` 환경이 유리합니다. 클라우드 시스템에서는 **트래픽에 따라 자동으로 증설**해주는 `오토스케일링(Auto Scaling)`이 있어 유리합니다. 클라우드의 데이터센터는 전 세계에 퍼져 있기 때문에 자연 재해로 인해 데이터 시스템이 다운되더라도 다른 지역에서 시스템 운영을 지속할 수 있습니다.

  - 빠르게 서비스를 제공해야 하는 시스템이나 **PoC**(Proof of Concept)도 클라우드가 용이하며, 초기 **투자금이 적은 스타트업이나 개인 개발자**도 클라우드가 유리합니다.

> 하이브리드 클라우드 Hybrid Cloud

위처럼, `온프레미스`, `클라우드` 환경 각각 장단점을 가지고 있기 때문에 함께 사용하기도 합니다. 또한 클라우드 프로바이더들도 각자의 장점이 달라서 여러 클라우드를 함께 사용하기도 합니다.

---

# 3. 하드웨어

인프라에서 `하드웨어`와 `네트워크`는 가장 Low-Level 입니다.

먼저 하드웨어를 살펴보면, `온프레미스` 환경은 여러 대의 서버 장비로 구성됩니다. `클라우드`는 인스턴스의 하드웨어 성능을 필요에 따라 선택합니다.

> CPU

`CPU`의 성능은 `코어`와 `캐시`에 영향을 받습니다. `코어`가 많을수록 동시에 처리하는 연산이 늘어나고, 메모리와의 처리 속도를 완화하기 위한 `캐시`는 크기가 클수록 성능이 좋습니다.

`GPU`(Graphics Processing Unit)는 그래픽을 처리하는데 특화된 프로세서입니다.

`CPU`가 **직렬 처리에 최적화**된 몇 개의 코어로 구성된 반면, `GPU`는 **병렬 처리에 최적화된 작고 많은 코어**로 이루어져 있습니다.

따라서 딥러닝이나 수치해석 등 **대량의 데이터를 고속으로 처리해야하는 분야**에서는 CPU와 GPU를 함께 사용해서 처리 성능을 높이는 `GPU 컴퓨팅 방식`이 사용됩니다. 이 방식은 **연산이 많이 필요한 부분을 GPU**에게 넘기고 **나머지 코드만을 CPU**에서 처리하는 방식입니다.

> 메모리

**주기억장치**인 메모리는 **데이터 용량이 크거나 전송 속도가 고속**일수록 고성능입니다.

서버용으로는 **전력 소모가 적고 오류 처리가 탑재**되어 있는 것을 주로 선정합니다.

> 데이터 스토리지

**데이터를 저장**하는 장비입니다.

보통 **스토리지의 속도가 제일 느리기 때문**에 스토리지의 용량이나 읽기, 쓰기 속도가 시스템 전체의 속도에 영향을 주는 경우가 많습니다. `하드디스크`나 `SSD` 등으로 이루어져 있습니다.

IT에서 가장 중요한 **데이터**가 손실되면 안되기 때문에 대부분 `고가용성`(High Availability, HA, 오랜 기간 동안 지속적으로 운영)을 위해 `이중화`(redundancy) 또는 `다중화`로 구성합니다.

- `이중화`란 **같은 장비 또는 시스템이 장애가 나는 것을 대비해 같은 모듈을 2개(또는 그 이상) 준비하는 것**을 말합니다.

> 기타 하드웨어

이 외에도 전원 차단을 방지하는 `무정전 전원공급장치`(Uninterruptible Power Supply, UPS)나 여러 대의 서버를 관리하기 위한 `KVM 스위치`, 서버 장비 설치에 사용하는 `서버 랙` 등이 있습니다. 서버 랙은 19인치 랙이 많이 사용됩니다.

이러한 하드웨어는 다양한 스펙의 라인업이 있으므로 **용도에 따라 선택해서 구축**하게 됩니다.

클라우드를 사용하는 경우도 마찬가지로 용도에 따라 **가상 머신의 성능**을 선택하고 조합하여 사용할 수 있습니다. 클라우드 업체에게 컨설팅을 받는 것도 하나의 방법입니다.

> 방화벽

`방화벽`은 **보안을 위해 내부 네트워크와 외부 네트워크의 통신을 제어**하고 **불필요한 통신을 차단**하는 것입니다.

- `패킷 필터형` : 통과하는 `패킷`을 포트 번호나 IP 주소를 바탕으로 필터링합니다.
- `애플리케이션 게이트웨이형` : 애플리케이션 **프로토콜 레벨**에서 외부와의 통신을 제어하는 방식으로 일반적으로 `프록시 서버`라고 부릅니다. 세션에 포함되어 있는 정보를 검사하기 위해서 **기존 세션을 종료하고 새로운 세션**을 만듭니다. 패킷 필터형에 비해서 **속도는 느리지만 많은 검사를 수행**할 수 있습니다.

---

# 4. 네트워크

각종 장비를 식별하기 위해 `네트워크 주소`(address)를 활용합니다.

> MAC 주소 (물리 주소 / 이더넷 주소)

물리적으로 할당되는 **48bit 주소**입니다.

앞 24bit는 네트워크 부품의 제조업체를 식별하고, 뒤 24bit는 각 제조업체가 중복되지 않도록 할당합니다. 16진수로 표기하며 2byte씩 구분해서 표기합니다.

> IP 주소

인터넷이나 인트라넷 같은 **네트워크에 연결된 장비에 할당되는 번호**입니다.

주로 많이 사용하는 `IPv4`의 경우 8bit씩 4개로 구분된 32bit 주소입니다(예를 들어 192.168.1.1). 각 자리는 0~255까지 표현이 가능합니다. IPv4는 하나의 네트워크에 2의 32승(약 42억대)까지밖에 연결할 수가 없어서 인터넷에서 IP 주소가 고갈될 우려가 있습니다.

그래서 `IPv6`는 128비트의 IP주소를 사용하고 있습니다. 또한 사내 네트워크에서는 임의의 주소를 할당하는 프라이빗 주소를 사용하고, 인터넷과의 경계에서 글로벌 주소로 변환하는 `NAT` 장비를 사용합니다.

- `사설 IP (Private IP)`

  - 인터넷에서 사용되지 않는 비공개적인 IP 주소입니다.
  - 사설 IP는 로컬 네트워크에서만 사용되며, 일반적으로 집이나 사무실 내부의 장치들에 할당됩니다. 사설 IP는 **인터넷에서 라우팅되지 않으므로 외부 인터넷에서는 접근할 수 없습니다.**
  - 사설 IP 주소는 `10.0.0.0/8`, `172.16.0.0/12`, `192.168.0.0/16`의 IP 대역을 사용합니다.
  - 사설 IP는 IP 주소 부족 문제를 해결하고, 네트워크 보안을 강화하며, 유연한 네트워크 구성을 가능하게 하고, 비용을 절감하며, 로컬 서비스를 제공하는 등의 이점을 가지고 있습니다.

- `공인 IP (Public IP)`
  - 인터넷에서 사용되는 공개적인 IP 주소입니다. 공인 IP는 인터넷을 통해 외부에서 접근 가능한 인터넷 서버, 웹 사이트, 클라우드 서비스 등에 할당됩니다.
  - 공인 IP는 인터넷 서비스 제공업체(Internet Service Provider, ISP)에서 할당되며, 이 주소는 공용으로 사용되기 때문에 중복된 IP 주소가 없도록 관리됩니다.

> OSI 모델

통신을 할 때에는 서로 어떻게 메시지를 주고받고, 어떤 언어를 사용할지 등의 **규칙이 필요**합니다. 이런 규약을 `통신 프로토콜`이라고 합니다.

`OSI 모델(Open Systems Interconnection Model)`은 국제 표준화 기구(International Organization for Standardization, IOS)에서 만든 **컴퓨터의 통신 기능을 계층 구조로 나눈 모델**입니다.

총 7계층으로 이루어져 있습니다. **데이터가 네트워크로 나갈 때는 위층**에서부터, **네트워크에서 데이터를 받을 때는 아래층**에서부터 들어옵니다. 인터넷에서는 `TCP/IP` 계층 모델을 사용합니다.

[사용자가 웹브라우저에 접속하면 무슨 일이 일어날까? (네트워크 관점)](https://joydev.netlify.app/cs/2023-04-18-browser-network/) 포스팅에서 해당 내용에 대해 자세히 정리하였으니 가볍게 넘어가겠습니다 :)

- 1계층 `물리 계층(Physical Layer)`

  - 전송 케이블이 직접 연결되는 계층으로 케이블을 통해 전송하는 기능을 합니다.

- 2계층 `데이터 링크 계층(Data Link Layer)`

  - 동일한 네트워크 간 인접한 두 시스템(노드) 간 통신을 규정합니다.

- 3계층 `네트워크 계층(Network Layer)`

  - 서로 다른 네트워크 간 통신을 위한 규정입니다. 특정 서버로 가는 경로를 효율적으로 처리하는 라우팅(routing) 기능이 있습니다. 데이터 링크 계층이 MAC 주소를 기반으로 한다면 네트워크 계층은 IP 주소를 기반으로 합니다.

- 4계층 `전송 계층(Transport Layer)`

  - 데이터 전송을 제어하는 계층입니다. 보낼 데이터의 용량, 속도, 목적지 등을 처리합니다. 대표적인 프로토콜로는 TCP와 UDP가 있습니다.

- 5계층 `세션 계층(Session Layer)`

  - 애플리케이션 간 연결을 유지 및 해제하는 역할을 합니다. 커넥션 확립 타이밍이나 데이터 전송 타이밍 등을 규정합니다.

- 6계층 `프레젠테이션 계층(Presentation Layer)`

  - 데이터를 애플리케이션이 이해할 수 있도록 변환해주는 역할을 합니다. 데이터의 저장 형식, 압축, 문자 인코딩 등을 변환하고 데이터를 안전하게 전송하기 위해 암호화, 복호화하는 기능도 이 계층에서 처리합니다.

- 7계층 `응용 계층(Application Layer)`
  - 최상위 계층으로 웹 브라우저나 아웃룩처럼 사용자가 직접 사용하는 애플리케이션을 의미합니다.

---

# 5. 리눅스 Linux OS

(정리예정)

---

# 6. 미들웨어

(정리예정)

---

# 7. 인프라 구성 및 관리

(정리예정)
